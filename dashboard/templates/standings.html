{% extends 'base.html' %}
{% block title %}F1 Standings{% endblock %}

{% block extra_css %}
<style>
    .standings-header {
        background: var(--f1-gradient);
        color: white;
        padding: 2rem;
        margin-bottom: 2rem;
        border-radius: 12px;
        text-align: center;
    }
    .standings-toggle {
        display: flex;
        justify-content: center;
        margin-bottom: 2rem;
    }
    .standings-toggle-btn {
        background: none;
        border: 1px solid;
        padding: 0.5rem 1.5rem;
        cursor: pointer;
    }
    .standings-toggle-btn:first-child { border-radius: 8px 0 0 8px; }
    .standings-toggle-btn:last-child { border-radius: 0 8px 8px 0; }

    body.light-mode .standings-toggle-btn { border-color: #ccc; color: #333; }
    body.light-mode .standings-toggle-btn.active { background-color: var(--f1-red); color: white; border-color: var(--f1-red); }
    
    body.dark-mode .standings-toggle-btn { border-color: #444; color: var(--f1-silver); }
    body.dark-mode .standings-toggle-btn.active { background-color: var(--f1-red); color: white; border-color: var(--f1-red); }

    .standings-section { display: none; }
    .standings-section.active { display: block; }

    .driver-cell { display: flex; align-items: center; }
    .driver-number {
        width: 30px; height: 30px; border-radius: 50%;
        display: inline-flex; align-items: center; justify-content: center;
        font-weight: bold; margin-right: 10px;
    }
    body.light-mode .driver-number { background-color: #eee; }
    body.dark-mode .driver-number { color: var(--f1-white); background-color: var(--f1-dark); }

    body.dark-mode .content-box,
    body.dark-mode .standings-section.content-box {
        background: #232527 !important;
        color: #fff !important;
        border: 1px solid #333;
    }
    body.dark-mode .table,
    body.dark-mode .table th,
    body.dark-mode .table td {
        background: #232527 !important;
        color: #fff !important;
        border-color: #333 !important;
    }
    body.dark-mode .table th {
        color: #fff !important;
        font-weight: 700;
    }
    body.dark-mode .table-striped > tbody > tr:nth-of-type(odd) {
        background-color: #232527 !important;
    }
    body.dark-mode .driver-number-gold {
        background: #FFD700 !important;
        color: #232527 !important;
    }
    body.dark-mode .driver-number-silver {
        background: #C0C0C0 !important;
        color: #232527 !important;
    }
    body.dark-mode .driver-number-bronze {
        background: #CD7F32 !important;
        color: #fff !important;
    }
    body.dark-mode .driver-number-red {
        background: #dc143c !important;
        color: #fff !important;
    }
    body.light-mode .driver-number-gold {
        background: #FFD700 !important;
        color: #232527 !important;
    }
    body.light-mode .driver-number-silver {
        background: #C0C0C0 !important;
        color: #232527 !important;
    }
    body.light-mode .driver-number-bronze {
        background: #CD7F32 !important;
        color: #fff !important;
    }
    body.light-mode .driver-number-red {
        background: #dc143c !important;
        color: #fff !important;
    }
</style>
{% endblock %}

{% block content %}
<div class="standings-header">
    <h1><i class="fas fa-trophy me-2"></i>F1 Standings</h1>
    <p class="lead">{{ selected_year }} Season Standings</p>
</div>

<!-- Year Selector -->
<div class="year-selector" style="display: flex; justify-content: center; margin-bottom: 2rem; gap: 1rem; flex-wrap: wrap;">
    <button class="year-btn {% if selected_year == 2025 %}active{% endif %}" onclick="window.location.href='?year=2025'" style="background: none; border: 2px solid var(--f1-red); color: var(--f1-red); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-weight: 500;">2025</button>
    <button class="year-btn {% if selected_year == 2024 %}active{% endif %}" onclick="window.location.href='?year=2024'" style="background: none; border: 2px solid var(--f1-red); color: var(--f1-red); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-weight: 500;">2024</button>
    <button class="year-btn {% if selected_year == 2023 %}active{% endif %}" onclick="window.location.href='?year=2023'" style="background: none; border: 2px solid var(--f1-red); color: var(--f1-red); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-weight: 500;">2023</button>
</div>

<style>
.year-btn:hover,
.year-btn.active {
    background: var(--f1-red);
    color: white;
}
body.dark-mode .year-btn {
    border-color: var(--f1-gold);
    color: var(--f1-gold);
}
body.dark-mode .year-btn:hover,
body.dark-mode .year-btn.active {
    background: var(--f1-gold);
    color: #232527;
}
</style>

<div class="standings-toggle">
    <button id="toggle-drivers" class="standings-toggle-btn active" type="button">Drivers</button>
    <button id="toggle-constructors" class="standings-toggle-btn" type="button">Constructors</button>
</div>

<div id="drivers-standings" class="standings-section active content-box">
    <h4 class="mb-3">Drivers Standings</h4>
    <div class="table-responsive">
        <table class="table">
            <thead><tr><th>Pos</th><th>Driver</th><th>Points</th></tr></thead>
            <tbody>
                {% for d in driver_standings %}
                <tr>
                    <td class="text-center">{{ d.position }}</td>
                    <td class="driver-cell">
                        <span class="driver-number {% if forloop.counter == 1 %}driver-number-gold{% elif forloop.counter == 2 %}driver-number-silver{% elif forloop.counter == 3 %}driver-number-bronze{% else %}driver-number-red{% endif %}">{{ d.number }}</span>
                        {{ d.name }}
                    </td>
                    <td class="text-center fw-bold">{{ d.points|floatformat:0 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div id="constructors-standings" class="standings-section content-box">
    <h4 class="mb-3">Constructors Standings</h4>
    <div class="table-responsive">
        <table class="table">
            <thead><tr><th>Pos</th><th>Team</th><th>Points</th></tr></thead>
            <tbody>
                {% for t in team_standings %}
                <tr>
                    <td class="text-center">{{ t.position }}</td>
                    <td>{{ t.name }}</td>
                    <td class="text-center fw-bold">{{ t.points|floatformat:0 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const btnDrivers = document.getElementById('toggle-drivers');
    const btnConstructors = document.getElementById('toggle-constructors');
    const sectionDrivers = document.getElementById('drivers-standings');
    const sectionConstructors = document.getElementById('constructors-standings');

    function showDrivers() {
        btnDrivers.classList.add('active');
        btnConstructors.classList.remove('active');
        sectionDrivers.classList.add('active');
        sectionConstructors.classList.remove('active');
    }

    function showConstructors() {
        btnConstructors.classList.add('active');
        btnDrivers.classList.remove('active');
        sectionConstructors.classList.add('active');
        sectionDrivers.classList.remove('active');
    }

    btnDrivers.addEventListener('click', showDrivers);
    btnConstructors.addEventListener('click', showConstructors);
});
</script>
{% endblock %} 