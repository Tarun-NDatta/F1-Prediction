<!-- home.html -->
{% extends 'base.html' %}

{% block title %}Dashboard Home{% endblock %}

{% block extra_css %}
<style>
    /* Hero Section */
    .hero-section {
        background: var(--f1-gradient);
        color: white;
        padding: 3rem 0;
        border-radius: 0 0 50px 50px;
        position: relative;
        overflow: hidden;
        margin-bottom: 3rem;
    }

    .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M54 18h6v6h-6zM36 18h6v6h-6zM18 18h6v6h-6zM0 18h6v6H0zM54 0h6v6h-6zM36 0h6v6h-6zM18 0h6v6h-6zM0 0h6v6H0z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
        opacity: 0.1;
    }

    .hero-content {
        position: relative;
        z-index: 1;
    }

    .hero-title {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .hero-subtitle {
        font-size: 1.25rem;
        opacity: 0.9;
        margin-bottom: 2rem;
    }

    .racing-stats {
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
        gap: 1rem;
        margin-top: 2rem;
    }

    .stat-item {
        text-align: center;
        padding: 1rem;
        min-width: 120px;
    }

    .stat-number {
        font-size: 2rem;
        font-weight: bold;
        color: #ffd700;
        display: block;
    }

    .stat-label {
        font-size: 0.9rem;
        opacity: 0.8;
    }

    /* Feature Cards */
    .feature-card {
        padding: 2rem;
        height: 100%;
        display: flex;
        flex-direction: column;
        transition: all 0.3s ease;
    }

    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .feature-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        text-align: center;
        color: var(--f1-red);
    }

    .feature-title {
        color: var(--f1-red);
        font-weight: bold;
        font-size: 1.5rem;
        margin-bottom: 1rem;
        text-align: center;
    }

    .feature-description {
        color: #6b7280;
        line-height: 1.6;
        margin-bottom: 1.5rem;
        flex-grow: 1;
    }

    .feature-card .btn {
        align-self: center;
    }

    /* Coming Soon Badge */
    .coming-soon-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: #ffd700;
        color: #dc143c;
        padding: 0.25rem 0.75rem;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: bold;
        animation: pulse 2s infinite;
    }

    /* Benefits Section */
    .benefit-item {
        display: flex;
        align-items: flex-start;
        margin-bottom: 1.5rem;
    }

    .benefit-icon {
        font-size: 1.8rem;
        margin-right: 1rem;
        min-width: 40px;
        color: var(--f1-red);
    }

    .benefit-content h5 {
        color: var(--f1-red);
        margin-bottom: 0.5rem;
    }

    /* Quick Actions Section */
    .quick-actions {
        background: var(--f1-gradient);
        color: white;
        padding: 2rem 0;
        border-radius: 15px;
        margin: 2rem 0;
    }

    .quick-action-card {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        padding: 1.5rem;
        text-align: center;
        transition: all 0.3s ease;
        height: 100%;
    }

    .quick-action-card:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-3px);
    }

    .quick-action-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: #ffd700;
    }

    .quick-action-title {
        font-size: 1.2rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
    }

    .quick-action-description {
        font-size: 0.9rem;
        opacity: 0.9;
        margin-bottom: 1rem;
    }

    /* User Stats Section */
    .user-stats-section {
        background: var(--f1-light-bg);
        padding: 2rem 0;
        border-radius: 15px;
        margin: 2rem 0;
    }

    body.dark-mode .user-stats-section {
        background: var(--f1-dark-bg);
    }

    .user-stat-card {
        text-align: center;
        padding: 1.5rem;
        border-radius: 10px;
        background: white;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }

    body.dark-mode .user-stat-card {
        background: var(--f1-card-dark);
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .user-stat-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .user-stat-number {
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--f1-red);
        display: block;
    }

    .user-stat-label {
        font-size: 1rem;
        color: #6b7280;
        margin-top: 0.5rem;
    }

    body.dark-mode .user-stat-label {
        color: var(--f1-silver);
    }

    /* Card Stagger Animation */
    .feature-card:nth-child(1) { animation-delay: 0.1s; }
    .feature-card:nth-child(2) { animation-delay: 0.3s; }
    .feature-card:nth-child(3) { animation-delay: 0.5s; }

    /* Responsive Design */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 2rem;
        }
        
        .hero-subtitle {
            font-size: 1rem;
        }
        
        .feature-card {
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .feature-icon {
            font-size: 2.5rem;
        }
    }

    @media (max-width: 576px) {
        .hero-title {
            font-size: 1.8rem;
        }
        
        .stat-item {
            min-width: 100px;
            padding: 0.5rem;
        }
        
        .stat-number {
            font-size: 1.8rem;
        }
    }

    body.dark-mode .coming-soon-badge {
        background: #ffd700 !important;
        color: #dc143c !important;
        border: 1px solid #bfa100;
        box-shadow: 0 1px 4px #1a1a1a;
    }
    body.dark-mode .content-box, body.dark-mode .feature-card, body.dark-mode .feature-title, body.dark-mode .feature-description, body.dark-mode .display-4, body.dark-mode .stat-label, body.dark-mode .stat-number, body.dark-mode .feature-icon, body.dark-mode .feature-title, body.dark-mode .feature-description {
        color: #fff !important;
    }
    body.dark-mode .content-box {
        background: #232527 !important;
    }
    .hero-section {
        background: var(--f1-gradient) !important;
    }
    body.dark-mode .text-muted {
        color: #fff !important;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container hero-content text-center">
        <h1 class="hero-title fade-in"><i class="fas fa-flag-checkered me-2"></i>Formula 1 Results Predictor</h1>
        <p class="hero-subtitle fade-in">Track race data, view predictions, analyze performance trends, and bet on race outcomes using machine learning insights.</p>
        
        <div class="racing-stats fade-in">
            <div class="stat-item">
                <span class="stat-number" id="stat1">23</span>
                <span class="stat-label">Races per Season</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="stat2">20</span>
                <span class="stat-label">Drivers</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="stat3">10</span>
                <span class="stat-label">Teams</span>
            </div>
        </div>
    </div>
</section>

<!-- Quick Actions Section -->
{% if user.is_authenticated %}
<section class="quick-actions">
    <div class="container">
        <div class="row text-center mb-4">
            <div class="col-12">
                <h2 class="mb-3">Quick Actions</h2>
                <p class="mb-0">Access your most important features quickly</p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="quick-action-card">
                    <div class="quick-action-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="quick-action-title">Betting</div>
                    <div class="quick-action-description">Place bets on upcoming races and track your predictions</div>
                    <a href="{% url 'betting' %}" class="btn btn-light btn-sm">Go to Betting</a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="quick-action-card">
                    <div class="quick-action-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="quick-action-title">My Portfolio</div>
                    <div class="quick-action-description">View your betting history and performance analytics</div>
                    <a href="{% url 'portfolio' %}" class="btn btn-light btn-sm">View Portfolio</a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="quick-action-card">
                    <div class="quick-action-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="quick-action-title">My Bets</div>
                    <div class="quick-action-description">Track your active and completed bets</div>
                    <a href="{% url 'my_bets' %}" class="btn btn-light btn-sm">View Bets</a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="quick-action-card">
                    <div class="quick-action-icon">
                        <i class="fas fa-broadcast-tower"></i>
                    </div>
                    <div class="quick-action-title">Live Updates</div>
                    <div class="quick-action-description">Get real-time race commentary and updates</div>
                    <a href="{% url 'live_updates' %}" class="btn btn-light btn-sm">Live Updates</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- User Stats Section -->
<section class="user-stats-section">
    <div class="container">
        <div class="row text-center mb-4">
            <div class="col-12">
                <h2 class="text-danger mb-3">Your Stats</h2>
                <p class="text-muted">Track your performance and achievements</p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="user-stat-card">
                    <span class="user-stat-number">{{ user.profile.credits|default:5000 }}</span>
                    <div class="user-stat-label">Available Credits</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="user-stat-card">
                    <span class="user-stat-number">{{ user.profile.total_bets_placed|default:0 }}</span>
                    <div class="user-stat-label">Total Bets Placed</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="user-stat-card">
                    <span class="user-stat-number">{{ user.profile.won_bets|default:0 }}</span>
                    <div class="user-stat-label">Winning Bets</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="user-stat-card">
                    <span class="user-stat-number">{{ user.profile.achievements_earned|default:0 }}</span>
                    <div class="user-stat-label">Achievements</div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Feature Cards -->
<div class="row mt-4">
    <div class="col-lg-4 col-md-6 mb-4">
        <div class="content-box feature-card fade-in">
            <div class="card-body">
                <div class="feature-icon"><i class="fas fa-chart-bar"></i></div>
                <h5 class="feature-title">Results</h5>
                <p class="feature-description">View past race and qualifying results by season and round. Analyze driver performance across different circuits and weather conditions.</p>
                <a href="results/" class="btn btn-primary">View Results</a>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-4">
        <div class="content-box feature-card fade-in">
            <div class="card-body">
                <div class="feature-icon">
                    <svg class="f1-car-icon" width="40" height="24" viewBox="0 0 200 100" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px;"><path d="M20 45 L40 35 L80 30 L120 30 L160 35 L180 45 L175 55 L165 60 L35 60 L25 55 Z" fill="white" stroke="#dc143c" stroke-width="2"/><path d="M70 30 L130 30 L125 45 L75 45 Z" fill="#1a1a1a" stroke="#dc143c" stroke-width="1"/><path d="M15 40 L35 35 L35 45 L15 50 Z" fill="#dc143c"/><path d="M165 25 L185 25 L185 35 L165 35 Z" fill="#dc143c"/><path d="M165 20 L185 20 L185 30 L165 30 Z" fill="white" stroke="#dc143c" stroke-width="1"/><circle cx="45" cy="55" r="12" fill="#1a1a1a" stroke="#c0c0c0" stroke-width="2"/><circle cx="45" cy="55" r="6" fill="#c0c0c0"/><circle cx="155" cy="55" r="12" fill="#1a1a1a" stroke="#c0c0c0" stroke-width="2"/><circle cx="155" cy="55" r="6" fill="#c0c0c0"/><path d="M20 45 L10 47 L10 53 L20 55" fill="#dc143c"/><circle cx="75" cy="38" r="2" fill="#c0c0c0"/><circle cx="125" cy="38" r="2" fill="#c0c0c0"/><text x="100" y="50" text-anchor="middle" fill="#ffd700" font-family="Arial" font-size="12" font-weight="bold">1</text></svg>
                    <i class="fas fa-crystal-ball"></i>
                </div>
                <h5 class="feature-title">Predictions</h5>
                <p class="feature-description">Explore predicted race outcomes and compare model accuracy. Get insights into which drivers are likely to perform well in upcoming races.</p>
                <a href="prediction/" class="btn btn-primary">View Predictions</a>
            </div>
        </div>
    </div>
    

</div>

<div class="racing-stripe"></div>

<!-- Additional Features Row -->
<div class="row mt-4">
    <div class="col-lg-4 col-md-6 mb-4">
        <div class="content-box feature-card fade-in">
            <div class="card-body">
                <div class="feature-icon"><i class="fas fa-trophy"></i></div>
                <h5 class="feature-title">Standings</h5>
                <p class="feature-description">View current driver and constructor standings. Track championship points and positions throughout the season.</p>
                <a href="standings/" class="btn btn-primary">View Standings</a>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-4">
        <div class="content-box feature-card fade-in">
            <div class="card-body">
                <div class="feature-icon"><i class="fas fa-road"></i></div>
                <h5 class="feature-title">Circuits</h5>
                <p class="feature-description">Explore F1 circuits around the world. Learn about track characteristics, lap records, and historical data.</p>
                <a href="circuits/" class="btn btn-primary">View Circuits</a>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-4">
        <div class="content-box feature-card fade-in">
            <div class="card-body">
                <div class="feature-icon"><i class="fas fa-chart-pie"></i></div>
                <h5 class="feature-title">Statistics</h5>
                <p class="feature-description">Comprehensive F1 statistics and analytics. Compare drivers, teams, and seasons with detailed metrics.</p>
                <a href="statistics/" class="btn btn-primary">View Statistics</a>
            </div>
        </div>
    </div>
</div>

<!-- Benefits Section -->
<div class="row mt-5">
    <div class="col-12 text-center mb-4">
        <h2 class="text-danger">Why Use F1 Results Predictor?</h2>
    </div>
    
    <div class="col-md-6">
        <div class="benefit-item fade-in">
            <div class="benefit-icon"><i class="fas fa-bullseye"></i></div>
            <div class="benefit-content">
                <h5>High Accuracy</h5>
                <p>Our ML models achieve 85%+ accuracy in race predictions</p>
            </div>
        </div>
        
        <div class="benefit-item fade-in">
            <div class="benefit-icon"><i class="fas fa-bolt"></i></div>
            <div class="benefit-content">
                <h5>Real-time Updates</h5>
                <p>Get predictions updated with latest race and practice data</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="benefit-item fade-in">
            <div class="benefit-icon"><i class="fas fa-chart-line"></i></div>
            <div class="benefit-content">
                <h5>Data-Driven</h5>
                <p>Analysis based on historical F1 data from 1950-2024</p>
            </div>
        </div>
        
        <div class="benefit-item fade-in">
            <div class="benefit-icon"><i class="fas fa-graduation-cap"></i></div>
            <div class="benefit-content">
                <h5>University Research</h5>
                <p>Developed at University of Leicester with academic rigor</p>
            </div>
        </div>
    </div>
</div>

<!-- Stats Preview -->
<div class="row mt-5">
    <div class="col-12 text-center mb-4">
        <h2 class="text-danger">Performance Statistics</h2>
    </div>
    
    <div class="col-md-3 col-6 mb-4">
        <div class="content-box text-center py-3 fade-in">
            <div class="display-4 text-danger fw-bold">85%</div>
            <div class="text-muted">Prediction Accuracy</div>
        </div>
    </div>
    
    <div class="col-md-3 col-6 mb-4">
        <div class="content-box text-center py-3 fade-in">
            <div class="display-4 text-danger fw-bold">10K+</div>
            <div class="text-muted">Race Records</div>
        </div>
    </div>
    
    <div class="col-md-3 col-6 mb-4">
        <div class="content-box text-center py-3 fade-in">
            <div class="display-4 text-danger fw-bold">5</div>
            <div class="text-muted">ML Models</div>
        </div>
    </div>
    
    <div class="col-md-3 col-6 mb-4">
        <div class="content-box text-center py-3 fade-in">
            <div class="display-4 text-danger fw-bold">24/7</div>
            <div class="text-muted">Data Updates</div>
        </div>
    </div>
</div>

<!-- New Analytics Features Section -->
<div class="row mt-5">
    <div class="col-12 text-center mb-4">
        <h2 class="text-danger">Advanced Analytics</h2>
        <p class="text-muted">Explore detailed driver and team performance insights</p>
    </div>
    
    <div class="col-md-6 mb-4">
        <div class="content-box text-center py-4 fade-in analytics-card" style="cursor: pointer; transition: all 0.3s ease;" onclick="window.location.href='{% url 'driver_analytics' %}'">
            <div class="mb-3">
                <i class="fas fa-user-friends fa-3x text-danger"></i>
            </div>
            <h4 class="text-danger">Driver Analytics</h4>
            <p class="text-muted">Comprehensive driver performance analysis with teammate comparisons and points progression charts</p>
            <div class="mt-3">
                <span class="badge bg-danger">Points Progression</span>
                <span class="badge bg-warning">Teammate Battles</span>
                <span class="badge bg-info">Performance Trends</span>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-4">
        <div class="content-box text-center py-4 fade-in analytics-card" style="cursor: pointer; transition: all 0.3s ease;" onclick="window.location.href='{% url 'team_analytics' %}'">
            <div class="mb-3">
                <i class="fas fa-users fa-3x text-danger"></i>
            </div>
            <h4 class="text-danger">Team Analytics</h4>
            <p class="text-muted">Race-by-race team progression analysis with development trends and performance comparisons</p>
            <div class="mt-3">
                <span class="badge bg-danger">Team Progression</span>
                <span class="badge bg-warning">Development Trends</span>
                <span class="badge bg-info">Performance Metrics</span>
            </div>
        </div>
    </div>
</div>

<!-- Enhanced Prediction Features -->
<div class="row mt-5">
    <div class="col-12 text-center mb-4">
        <h2 class="text-danger">Enhanced Prediction Features</h2>
        <p class="text-muted">Advanced machine learning models with detailed accuracy metrics</p>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="content-box text-center py-3 fade-in">
            <div class="mb-3">
                <i class="fas fa-chart-scatter fa-2x text-danger"></i>
            </div>
            <h5 class="text-danger">Prediction vs Actual</h5>
            <p class="text-muted small">Interactive scatter plots showing prediction accuracy across all models</p>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="content-box text-center py-3 fade-in">
            <div class="mb-3">
                <i class="fas fa-chart-bar fa-2x text-danger"></i>
            </div>
            <h5 class="text-danger">Model Statistics</h5>
            <p class="text-muted small">Detailed accuracy metrics including MAE, Top-3, and Top-10 accuracy for each model</p>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="content-box text-center py-3 fade-in">
            <div class="mb-3">
                <i class="fas fa-sync-alt fa-2x text-danger"></i>
            </div>
            <h5 class="text-danger">Dynamic Updates</h5>
            <p class="text-muted small">Real-time standings updates and live prediction system integration</p>
        </div>
    </div>
</div>

<style>
.analytics-card:hover {
    transform: translateY(-5px) !important;
    box-shadow: 0 8px 25px rgba(220, 20, 60, 0.15) !important;
    border-color: var(--f1-red) !important;
}

.analytics-card:hover i {
    transform: scale(1.1);
    transition: transform 0.3s ease;
}

.analytics-card:hover h4 {
    color: var(--f1-red) !important;
}

body.dark-mode .analytics-card:hover {
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.15) !important;
    border-color: var(--f1-gold) !important;
}

body.dark-mode .analytics-card:hover h4 {
    color: var(--f1-gold) !important;
}
</style>

{% endblock %}

{% block extra_js %}
<script>
    // Animate stats on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Stats counter animation
        function animateValue(id, start, end, duration) {
            const element = document.getElementById(id);
            if (!element) return;
            
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                element.textContent = value;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }
        
        // Trigger animations with delay
        setTimeout(() => {
            animateValue("stat1", 0, 23, 1000);
            animateValue("stat2", 0, 20, 1000);
            animateValue("stat3", 0, 10, 1000);
        }, 500);
        
        // Add animation classes
        document.querySelectorAll('.fade-in').forEach(el => {
            el.style.opacity = 0;
            setTimeout(() => {
                el.style.opacity = 1;
            }, 100);
        });
    });
</script>
{% endblock %}